<div class="player-edit">
  <div class="player-video" [class]="playerFile.filePath ? 'flex' : 'hidden'">
    <video id="playerVideo" [muted]="true" [src]="playerFile.filePath" (loadedmetadata)="playerLoadedMetadata($event)"
      (timeupdate)="playerProgressUpdate()"></video>
    <div id="playerCrop" [hidden]="!filterActive.filterCrop" class="resizable"></div>
  </div>
  <div *ngIf="!playerFile.filePath" class="player-file">
    <img [src]="'/assets/open.svg'">
    <input type="file" (change)="playerFileOpen($event)" />
  </div>
</div>
<div class="player-controls" [class]="!playerFile.filePath ? 'pointer-events-none' : ''">
  <div class="player-buttons">
    <div>
      <button (click)="playerPlayPause()">
        <img [src]="playerVideo.paused || playerVideo.ended ? '/assets/play.svg' : '/assets/pause.svg'">
      </button>
      <button (click)="playerStop()">
        <img [src]="'/assets/stop.svg'">
      </button>
      <button (click)="playerMute()">
        <img [src]="playerVideo.muted || playerVideo.volume == 0 ? '/assets/mute.svg' : '/assets/volume.svg'">
      </button>
    </div>
    <div>
      <button [class]="filterActive.filterCrop ? 'active' : ''" (click)="$filterCrop()">
        <img [src]="'/assets/crop.svg'">
      </button>
      <button (click)="playerFileSave()">
        <img [src]="'/assets/done.svg'">
      </button>
      <button (click)="playerFileClose()">
        <img [src]="'/assets/close.svg'">
      </button>
    </div>
  </div>
  <progress id="playerProgress" min="0" value="0" (mouseup)="playerProgressChange($event)"></progress>
</div>
<modal *ngIf="fileSave.fileSaving || fileSave.fileSaved">
  <div class="player-save">
    <div *ngIf="fileSave.fileSaving">
      <p>Processing video...</p>
    </div>
    <div *ngIf="!fileSave.fileSaving">
      <div *ngIf="!fileSave.fileErrorText">
        <p>Video saved successfully!</p>
      </div>
      <div *ngIf="fileSave.fileErrorText">
        <p>An error has occurred during the processing of the video.
          Check the log for more details.</p>
      </div>
      <div class="flex space-x-4">
        <button *ngIf="fileSave.fileErrorText" (click)="playerFileError()" class="button-error">Error log</button>
        <button (click)="$playerFileSave()" class="button-ok">Ok</button>
      </div>
      <div *ngIf="fileSave.fileErrorView" class="player-error">
        <span [innerText]="fileSave.fileErrorText"></span>
      </div>
    </div>
  </div>
</modal>